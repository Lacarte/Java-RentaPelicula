<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="8035c780-31e5-4cf0-81d6-1aebdd768d0d">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<subDataset name="DatasetTimeSeries" uuid="3c4013a7-10a4-491e-8eba-9da8b178bb36">
		<queryString language="SQL">
			<![CDATA[SELECT DATE_FORMAT(ren.fecren,'%d/%m/%Y') AS fecha,COUNT(*) AS ctd FROM tbrenta ren
INNER JOIN tb_detalle_renta detren  ON detren.codren=ren.codren
GROUP BY  fecha ORDER BY fecha]]>
		</queryString>
		<field name="fecha" class="java.lang.String"/>
		<field name="ctd" class="java.lang.Long"/>
	</subDataset>
	<subDataset name="DatasetPie" uuid="b45b36c6-40e9-4288-bd72-2c63a63e532f">
		<queryString>
			<![CDATA[SELECT pel.titpel,detren.codpel AS codpel,COUNT(*) AS Cantidad FROM tbrenta ren
INNER JOIN tb_detalle_renta detren ON ren.codren=detren.codren
INNER JOIN tbpelicula pel ON pel.codpel=detren.codpel
GROUP BY codpel ORDER BY Cantidad desc
LIMIT 10]]>
		</queryString>
		<field name="titpel" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="codpel" class="java.lang.Integer">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="Cantidad" class="java.lang.Long"/>
	</subDataset>
	<queryString>
		<![CDATA[SELECT DATE_FORMAT(ren.fecren,'%d/%m/%Y') AS fecha,COUNT(*) AS ctd FROM tbrenta ren
INNER JOIN tb_detalle_renta detren  ON detren.codren=ren.codren
GROUP BY  fecha ORDER BY fecha]]>
	</queryString>
	<field name="fecha" class="java.lang.String"/>
	<field name="ctd" class="java.lang.Long"/>
	<title>
		<band height="500" splitType="Stretch">
			<frame>
				<reportElement x="0" y="0" width="802" height="201" uuid="8e579906-80fb-4fe6-b52f-556f20961106"/>
				<barChart>
					<chart evaluationTime="Report">
						<reportElement x="0" y="0" width="802" height="201" uuid="29ab54e2-453d-44f6-98ba-4404813e3306"/>
						<chartTitle/>
						<chartSubtitle/>
						<chartLegend/>
					</chart>
					<categoryDataset>
						<dataset>
							<incrementWhenExpression><![CDATA[$V{REPORT_COUNT}<=10]]></incrementWhenExpression>
						</dataset>
						<categorySeries>
							<seriesExpression><![CDATA["10 denye jou liv  lwe"]]></seriesExpression>
							<categoryExpression><![CDATA[$F{fecha}]]></categoryExpression>
							<valueExpression><![CDATA[$F{ctd}]]></valueExpression>
						</categorySeries>
					</categoryDataset>
					<barPlot>
						<plot/>
						<itemLabel/>
						<categoryAxisFormat>
							<axisFormat/>
						</categoryAxisFormat>
						<valueAxisFormat>
							<axisFormat/>
						</valueAxisFormat>
					</barPlot>
				</barChart>
			</frame>
			<frame>
				<reportElement x="0" y="201" width="398" height="299" backcolor="#CCCCCC" uuid="c57c519d-70c4-4469-acc1-8aa4068e77f4"/>
				<timeSeriesChart>
					<chart evaluationTime="Report">
						<reportElement x="0" y="0" width="398" height="299" uuid="6dc2193b-ece8-4990-a217-1cad6c8e788f"/>
						<chartTitle/>
						<chartSubtitle/>
						<chartLegend/>
					</chart>
					<timeSeriesDataset>
						<dataset>
							<incrementWhenExpression><![CDATA[$V{REPORT_COUNT}<=10]]></incrementWhenExpression>
							<datasetRun subDataset="DatasetTimeSeries" uuid="b2182565-e19d-4594-a677-95632b01c6f7">
								<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
							</datasetRun>
						</dataset>
						<timeSeries>
							<seriesExpression><![CDATA["10 denye dat liv lwe"]]></seriesExpression>
							<timePeriodExpression><![CDATA[(new SimpleDateFormat("dd/MM/yyyy")).parse($F{fecha})]]></timePeriodExpression>
							<valueExpression><![CDATA[$F{ctd}]]></valueExpression>
						</timeSeries>
					</timeSeriesDataset>
					<timeSeriesPlot>
						<plot/>
						<timeAxisFormat>
							<axisFormat/>
						</timeAxisFormat>
						<valueAxisFormat>
							<axisFormat/>
						</valueAxisFormat>
					</timeSeriesPlot>
				</timeSeriesChart>
			</frame>
			<frame>
				<reportElement x="402" y="201" width="398" height="299" backcolor="#CCCCCC" uuid="01dd58a5-2f06-4ff3-9ddd-c8eb142aa223"/>
				<pie3DChart>
					<chart isShowLegend="true" evaluationTime="Report" theme="aegean">
						<reportElement x="0" y="0" width="398" height="299" uuid="9534524e-a63e-4278-9d1d-17d66d904d33"/>
						<chartTitle/>
						<chartSubtitle/>
						<chartLegend/>
					</chart>
					<pieDataset maxCount="10">
						<dataset>
							<datasetRun subDataset="DatasetPie" uuid="91cbb9a6-58d5-4219-851b-254fd646ed08">
								<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
							</datasetRun>
						</dataset>
						<keyExpression><![CDATA[$F{titpel}]]></keyExpression>
						<valueExpression><![CDATA[$F{Cantidad}]]></valueExpression>
					</pieDataset>
					<pie3DPlot isShowLabels="true" labelFormat="{0} ({2})">
						<plot foregroundAlpha="0.5"/>
						<itemLabel>
							<font size="8" isBold="false"/>
						</itemLabel>
					</pie3DPlot>
				</pie3DChart>
				<staticText>
					<reportElement x="224" y="21" width="100" height="20" uuid="756d1b56-818b-43ed-b358-4025b749831e"/>
					<text><![CDATA[Static text]]></text>
				</staticText>
			</frame>
		</band>
	</title>
</jasperReport>
